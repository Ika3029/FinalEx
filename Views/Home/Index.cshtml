@model WebApplication1.Models.OrderViewModel
@{
    ViewBag.Title = "訂單查詢";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<style>
    body {
        background-color: #fff7f3;
        font-family: 'Segoe UI', sans-serif;
    }

    .card-wrapper {
        max-width: 900px;
        margin: auto;
    }

    .custom-card {
        border-radius: 16px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);
        border: none;
        overflow: hidden;
    }

    .card-header-custom {
        background: linear-gradient(135deg, #ffb7b7, #ff8e72);
        color: #fff;
        padding: 1rem 1.5rem;
    }

    .form-label {
        font-weight: bold;
        color: #d35400;
    }

    .section-title {
        font-size: 1.1rem;
        font-weight: 600;
        margin-top: 2rem;
        margin-bottom: 1rem;
        padding-left: 12px;
        border-left: 4px solid #ff8e72;
        color: #e67e22;
    }

    .btn-peach {
        background-color: #ff8e72;
        color: white;
    }

        .btn-peach:hover {
            background-color: #e17055;
        }

    .table thead {
        background-color: #ffe9e3;
        color: #d35400;
    }

    .table-hover tbody tr:hover {
        background-color: #fff2ec;
        transition: background-color 0.3s ease;
    }

    .alert-warning {
        background-color: #fff3cd;
        border-left: 5px solid #ffa502;
        color: #856404;
    }
</style>

<div class="container my-5 card-wrapper">
    <div class="card custom-card">
        <div class="card-header card-header-custom">
            <h4 class="mb-0">🍑 訂單查詢系統</h4>
        </div>
        <div class="card-body">
            @using (Html.BeginForm("Search", "Home", FormMethod.Post))
            {
                <div class="mb-3">
                    <label class="form-label">輸入訂單編號：</label>
                    <div class="input-group">
                        @Html.TextBoxFor(m => m.SalesOrderID, new
                        {
                            @class = "form-control",
                            placeholder = "請輸入 SalesOrderID",
                            @type = "number"
                        })
                        <button type="submit" class="btn btn-peach">查詢</button>
                    </div>
                </div>
            }

            @if (ViewBag.Message != null)
            {
                <div class="alert alert-warning mt-3">
                    @ViewBag.Message
                </div>
            }

            @if (Model.OrderHeader != null)
            {
                <div class="section-title">📋 訂單單頭資料</div>
                <table class="table table-bordered table-sm">
                    <tbody>
                        <tr><th>訂單編號</th><td>@Model.OrderHeader.SalesOrderID</td></tr>
                        <tr><th>客戶 ID</th><td>@Model.OrderHeader.CustomerID</td></tr>
                        <tr><th>客戶姓名</th><td>@(Model.Customer?.LastName + " " + Model.Customer?.FirstName)</td></tr>
                        <tr><th>下單日期</th><td>@Model.OrderHeader.OrderDate.ToString("yyyy-MM-dd")</td></tr>
                    </tbody>
                </table>

                <div class="section-title">🧾 訂單明細資料</div>
                <table class="table table-striped table-bordered table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Detail ID</th>
                            <th>ProductID</th>
                            <th>OrderQty</th>
                            <th>UnitPrice</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.OrderDetails)
                        {
                            <tr>
                                <td>@item.SalesOrderDetailID</td>
                                <td>@item.ProductID</td>
                                <td>@item.OrderQty</td>
                                <td>@item.UnitPrice.ToString("C")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
        </div>
    </div>
</div>
